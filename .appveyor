version: '1.0.0.{build}'

branches:
  only:
  - master

skip_tags: true

configuration:
  - Release
  - Debug

skip_commits:
  files:
    - Marathon.Wiki/**
    - LICENSE
    - README.md

dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '$(APPVEYOR_REPO_COMMIT)'

before_build:
- cmd: nuget restore

build:
  verbosity: minimal

after_build:
- cmd: |
    7z a Marathon.zip "%APPVEYOR_BUILD_FOLDER%\Marathon\bin\%CONFIGURATION%\net5.0\*"
    7z a Marathon.CLI.zip "%APPVEYOR_BUILD_FOLDER%\Marathon.CLI\bin\%CONFIGURATION%\net5.0\*"

artifacts:
- path: Marathon.zip
  name: Marathon
- path: Marathon.CLI.zip
  name: Marathon.CLI